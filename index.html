<!DOCTYPE html>
<html>
<head>
  <title>Number Tracking Tool</title>
</head>
<body>

  <!-- Firebase JavaScript SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>

  <!-- Your Firebase configuration -->
  <script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC1E9Za2CF_uBqZ8ySWa6pJ4NJtsPidFXQ",
      authDomain: "usagetool.firebaseapp.com",
      databaseURL: "https://usagetool-default-rtdb.europe-west1.firebasedatabase.app/",
      projectId: "usagetool",
      storageBucket: "usagetool.appspot.com",
      messagingSenderId: "161908323568",
      appId: "1:161908323568:web:5ba0b3f7381cd7d1d9be35"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>

  <input type="text" id="messageInput1" placeholder="Water" style="margin-top: 40px; margin-left: 20px;">
  <input type="text" id="messageInput2" placeholder="Gas" style="margin-top: 40px; margin-left: 20px;">
  <input type="text" id="messageInput3" placeholder="Electricity" style="margin-top: 40px; margin-left: 20px;">
  <button onclick="sendMessage()">Send</button>

  <ul id="messageList" style="margin-top: 40px; margin-left: 20px;"></ul>

  <script>
    function sendMessage() {
      const water = document.getElementById('messageInput1').value;
      const gas = document.getElementById('messageInput2').value;
      const electricity = document.getElementById('messageInput3').value;
      const timestamp = new Date().toISOString();

      // Push the data to the Firebase database
      numbersRef.push({
        water: water,
        gas: gas,
        electricity: electricity,
        timestamp: timestamp
      });

      alert("Numbers and timestamp recorded successfully!");
    }


    // Reference the "numbers" node in the database
    var numbersRef = database.ref("numbers");

    // Listen for changes in the numbers data
    numbersRef.on("value", function(snapshot) {
      // Clear the existing numbers in the <ul> element
      var messageList = document.getElementById("messageList");
      messageList.innerHTML = "";

      // Iterate over the snapshot of numbers and append them to the <ul> element
      snapshot.forEach(function(childSnapshot) {
        var numberData = childSnapshot.val();

        // Create a <li> element for each number
        var li = document.createElement("li");
        li.style.display = "flex";

        // Create a delete button for each reading
        var deleteButton = document.createElement("button");
        deleteButton.textContent = "-";
        deleteButton.style.marginRight = "10px";
        deleteButton.addEventListener("click", function() {
          deleteNumber(childSnapshot.key);
        });

        // Append the delete button to the <li> element
        li.appendChild(deleteButton);

        // Create a span element for the number data
        var span = document.createElement("span");
        span.textContent = `Water: ${numberData.water}, Gas: ${numberData.gas}, Electricity: ${numberData.electricity}, Timestamp: ${numberData.timestamp}`;

        // Append the span element to the <li>
        li.appendChild(span);

        // Append the <li> element to the <ul>
        messageList.appendChild(li);
      });
    });

    // Function to delete a number
     function deleteNumber(numberKey) {
      // Get a reference to the specific number in the database
       var numberRef = database.ref("numbers/" + numberKey);

      // Remove the number from the database
      // numberRef.remove();
    }
  </script>
</body>
</html>




